= I2C 相关指令
== 扫描总线上的设备
=== 下行指令
#figure(caption:"扫描总线上的设备")[
  #table(columns: (auto,auto,auto),
  table.header([偏移],[内容],[解释]),
  [0:3],[04 00 00 00],[消息类型],
  [4:7],[?? ?? ?? ??],[可定制的消息序列号],
  )
]

=== 上行消息
#figure(caption:"扫描总线设备的上行消息")[
  #table(columns: (auto,auto,auto),
  table.header([偏移],[内容],[解释]),
  [0:3],[04 00 00 ff],[消息类型],
  [4:7],[?? ?? ?? ??],[可定制的消息序列号],
  [8:11],[...],[总线上从设备的数目],
  [...],[...], [列出所有从设备的地址],
  )
]

== 对单个设备写入
=== 下行指令
#figure(caption:"单个设备写入")[
  #table(columns: (auto,auto,auto),
  table.header([偏移],[内容],[解释]),
  [0:3],[04 01 00 00],[消息类型],
  [4:7],[?? ?? ?? ??],[可定制的消息序列号],
  [8:11],[?? ?? 00 00],[8/10位从设备地址],
  [12:15],[?? ?? 00 00],[写入字节数],
  [...],[...],[写入的字节]
  )
]

=== 上行消息
#figure(caption:"单个设备写入上行消息")[
  #table(columns: (auto,auto,auto),
  table.header([偏移],[内容],[解释]),
  [0:3],[04 01 00 ff],[消息类型],
  [4:7],[?? ?? ?? ??],[可定制的消息序列号],
  [8:11],[00/ff 00 00 00],[00代表成功，ff代表失败，若有必要，细化错误码]
  )
]

== 对单个设备的内部寄存器地址写入
=== 下行指令
#figure(caption:"单个设备的内部地址写入")[
  #table(columns: (auto,auto,auto),
  table.header([偏移],[内容],[解释]),
  [0:3],[04 02 00 00],[消息类型],
  [4:7],[?? ?? ?? ??],[可定制的消息序列号],
  [8:11],[?? ?? 00 00],[8/10位从设备地址],
  [12:15],[?? ?? ?? ??],[内部寄存器起始地址],
  [16:19],[?? ?? 00 00],[写入字节数],
  [...],[...],[写入的字节]
  )
]
=== 上行消息

#figure(caption:"单个设备的内部地址写入的上行消息")[
  #table(columns: (auto,auto,auto),
  table.header([偏移],[内容],[解释]),
  [0:3],[04 02 00 ff],[消息类型],
  [4:7],[?? ?? ?? ??],[可定制的消息序列号],
  [8:11],[00/ff 00 00 00],[00代表成功，ff代表失败，若有必要，细化错误码]
  )
]

== 读取单个设备

=== 下行指令
#figure(caption:"单个设备的内部地址读出")[
  #table(columns: (auto,auto,auto),
  table.header([偏移],[内容],[解释]),
  [0:3],[04 03 00 00],[消息类型],
  [4:7],[?? ?? ?? ??],[可定制的消息序列号],
  [8:11],[?? ?? 00 00],[8/10位从设备地址],
  [12:15],[?? ?? ?? ??],[想要读取的字节数，小端],
  )
]

=== 上行消息
#figure(caption:"单个设备的内部地址读出的上行消息")[
  #table(columns: (auto,auto,auto),
  table.header([偏移],[内容],[解释]),
  [0:3],[04 03 00 ff],[消息类型],
  [4:7],[?? ?? ?? ??],[可定制的消息序列号],
  [8:11],[00/ff ?? 00 00],[00代表成功，ff代表失败，若有必要，细化错误码],
  [12:15],[?? ?? 00 00],[读回字节数],
  [...],[...],[读到的字节],
  )
]

== 读取单个设备的内部寄存器地址

=== 下行指令
#figure(caption:"单个设备的内部地址读出")[
  #table(columns: (auto,auto,auto),
  table.header([偏移],[内容],[解释]),
  [0:3],[04 04 00 00],[消息类型],
  [4:7],[?? ?? ?? ??],[可定制的消息序列号],
  [8:11],[?? ?? 00 00],[8/10位从设备地址],
  [12:15],[?? ?? 00 00],[寄存器地址，小端],
  [16:19],[?? ?? ?? ??],[想要读取的字节数，小端],
  )
]

=== 上行消息
#figure(caption:"单个设备的内部地址读出的上行消息")[
  #table(columns: (auto,auto,auto),
  table.header([偏移],[内容],[解释]),
  [0:3],[04 04 00 ff],[消息类型],
  [4:7],[?? ?? ?? ??],[可定制的消息序列号],
  [8:11],[00/ff ?? 00 00],[00代表成功，ff代表失败，若有必要，细化错误码],
  [12:15],[?? ?? 00 00],[读回字节数],
  [...],[...],[读到的字节],
  )
]
